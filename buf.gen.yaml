version: v1
managed:
  enabled: true
plugins:
  # - plugin: buf.build/bufbuild/es
  #   opt:
  #     - target=ts
  #     - import_extension=.ts
  #   out: src/
  - plugin: buf.build/protocolbuffers/js
    out: src/
    opt: import_style=commonjs
  - plugin: buf.build/grpc/node
    out: src
    opt: grpc_js,import_style=commonjs
  - plugin: buf.build/community/timostamm-protobuf-ts
    out: src/
    # https://github.com/timostamm/protobuf-ts/blob/main/MANUAL.md#the-protoc-plugin
    opt: add_pb_suffix,client_grpc1,generate_dependencies,keep_enum_prefix,ts_nocheck,use_proto_field_name

  # - plugin: es
  #   path: ./node_modules/.bin/protoc-gen-es
  #   out: src
  #   opt: target=dts
  #
  #
  #
  #
  # - plugin: buf.build/bufbuild/es
  #   opt:
  #     - js_import_style=legacy_commonjs
  #   out: src
  # - plugin: buf.build/bufbuild/es
  #   opt:
  #     - target=ts
  #   out: src
  # - plugin: buf.build/connectrpc/es
  #   out: src
  #   opt: target=ts
